openapi: 3.0.3
info:
  title: 'Laravel API 文档'
  description: '已经实现了标准化的搜同款(以图搜图)接口系统，支持多平台商品搜索功能。当前已完成 1688 平台的接口实现，并为其他 24 个平台预留了标准化的接口框架。'
  version: 1.0.0
servers:
  -
    url: 'http://127.0.0.1:8000'
tags:
  -
    name: 'VIP管理 (VIP Plans)'
    description: ''
  -
    name: '优惠码管理 (Coupons)'
    description: ''
  -
    name: 图片搜索：1688
    description: ''
  -
    name: 支付接口
    description: ''
  -
    name: 用户认证
    description: ''
  -
    name: '订单管理 (Orders)'
    description: ''
components:
  securitySchemes:
    default:
      type: http
      scheme: bearer
      description: '您可以通过注册或登录接口获取访问令牌。在请求头中添加 <code>Authorization: Bearer {token}</code> 来进行认证。'
security:
  -
    default: []
paths:
  /api/vip/plans:
    get:
      summary: 获取VIP套餐列表
      operationId: VIP
      description: "获取所有可用的VIP套餐，按推荐和排序展示。\n前端根据关键数据渲染描述：价格/月、AI点数、约N次使用额度（点数/2）、品牌预估/运费测算功能"
      parameters: []
      responses:
        200:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  success: true
                  code: 200
                  data:
                    -
                      id: 1
                      name: '月度会员 68元'
                      price: '68.00'
                      final_price: '68.00'
                      ai_points: 6000
                      duration_days: 30
                      features: []
                      is_recommended: false
                      sort_order: 1
                  message: 获取成功
                properties:
                  success:
                    type: boolean
                    example: true
                  code:
                    type: integer
                    example: 200
                  data:
                    type: array
                    example:
                      -
                        id: 1
                        name: '月度会员 68元'
                        price: '68.00'
                        final_price: '68.00'
                        ai_points: 6000
                        duration_days: 30
                        features: []
                        is_recommended: false
                        sort_order: 1
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          example: 1
                        name:
                          type: string
                          example: '月度会员 68元'
                        price:
                          type: string
                          example: '68.00'
                        final_price:
                          type: string
                          example: '68.00'
                        ai_points:
                          type: integer
                          example: 6000
                        duration_days:
                          type: integer
                          example: 30
                        features:
                          type: array
                          example: []
                        is_recommended:
                          type: boolean
                          example: false
                        sort_order:
                          type: integer
                          example: 1
                  message:
                    type: string
                    example: 获取成功
      tags:
        - 'VIP管理 (VIP Plans)'
      security: []
  /api/vip/my-info:
    get:
      summary: 获取我的VIP信息
      operationId: VIP
      description: 获取当前用户的VIP状态、AI点数余额等信息
      parameters: []
      responses:
        200:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  success: true
                  code: 200
                  data:
                    is_vip: true
                    vip_plan:
                      id: 2
                      name: '月度会员 128元'
                    vip_expired_at: '2026-02-26 15:00:00'
                    ai_points: 15000
                    ai_points_records_count: 5
                  message: 获取成功
                properties:
                  success:
                    type: boolean
                    example: true
                  code:
                    type: integer
                    example: 200
                  data:
                    type: object
                    properties:
                      is_vip:
                        type: boolean
                        example: true
                      vip_plan:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 2
                          name:
                            type: string
                            example: '月度会员 128元'
                      vip_expired_at:
                        type: string
                        example: '2026-02-26 15:00:00'
                      ai_points:
                        type: integer
                        example: 15000
                      ai_points_records_count:
                        type: integer
                        example: 5
                  message:
                    type: string
                    example: 获取成功
      tags:
        - 'VIP管理 (VIP Plans)'
  /api/vip/my-orders:
    get:
      summary: 获取我的订单列表
      operationId: ''
      description: 获取当前用户的VIP购买订单历史
      parameters:
        -
          in: query
          name: page
          description: 页码
          example: 1
          required: false
          schema:
            type: integer
            description: 页码
            example: 1
        -
          in: query
          name: per_page
          description: 每页数量
          example: 10
          required: false
          schema:
            type: integer
            description: 每页数量
            example: 10
      responses:
        200:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  success: true
                  code: 200
                  data:
                    current_page: 1
                    data:
                      -
                        id: 1
                        order_no: 202601261500001ABC
                        plan_name: '月度会员 128元'
                        final_price: '128.00'
                        status: paid
                        paid_at: '2026-01-26 15:05:00'
                        created_at: '2026-01-26 15:00:00'
                    per_page: 10
                    total: 1
                  message: 获取成功
                properties:
                  success:
                    type: boolean
                    example: true
                  code:
                    type: integer
                    example: 200
                  data:
                    type: object
                    properties:
                      current_page:
                        type: integer
                        example: 1
                      data:
                        type: array
                        example:
                          -
                            id: 1
                            order_no: 202601261500001ABC
                            plan_name: '月度会员 128元'
                            final_price: '128.00'
                            status: paid
                            paid_at: '2026-01-26 15:05:00'
                            created_at: '2026-01-26 15:00:00'
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                              example: 1
                            order_no:
                              type: string
                              example: 202601261500001ABC
                            plan_name:
                              type: string
                              example: '月度会员 128元'
                            final_price:
                              type: string
                              example: '128.00'
                            status:
                              type: string
                              example: paid
                            paid_at:
                              type: string
                              example: '2026-01-26 15:05:00'
                            created_at:
                              type: string
                              example: '2026-01-26 15:00:00'
                      per_page:
                        type: integer
                        example: 10
                      total:
                        type: integer
                        example: 1
                  message:
                    type: string
                    example: 获取成功
      tags:
        - 'VIP管理 (VIP Plans)'
  /api/vip/my-ai-points:
    get:
      summary: 获取我的AI点数明细
      operationId: AI
      description: 获取当前用户的AI点数变动记录
      parameters:
        -
          in: query
          name: page
          description: 页码
          example: 1
          required: false
          schema:
            type: integer
            description: 页码
            example: 1
        -
          in: query
          name: per_page
          description: 每页数量
          example: 20
          required: false
          schema:
            type: integer
            description: 每页数量
            example: 20
      responses:
        200:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  success: true
                  code: 200
                  data:
                    current_page: 1
                    data:
                      -
                        id: 1
                        points: 15000
                        balance_after: 15000
                        type: vip_purchase
                        description: 购买VIP套餐
                        expired_at: null
                        created_at: '2026-01-26 15:05:00'
                    per_page: 20
                    total: 1
                  message: 获取成功
                properties:
                  success:
                    type: boolean
                    example: true
                  code:
                    type: integer
                    example: 200
                  data:
                    type: object
                    properties:
                      current_page:
                        type: integer
                        example: 1
                      data:
                        type: array
                        example:
                          -
                            id: 1
                            points: 15000
                            balance_after: 15000
                            type: vip_purchase
                            description: 购买VIP套餐
                            expired_at: null
                            created_at: '2026-01-26 15:05:00'
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                              example: 1
                            points:
                              type: integer
                              example: 15000
                            balance_after:
                              type: integer
                              example: 15000
                            type:
                              type: string
                              example: vip_purchase
                            description:
                              type: string
                              example: 购买VIP套餐
                            expired_at:
                              type: string
                              example: null
                            created_at:
                              type: string
                              example: '2026-01-26 15:05:00'
                      per_page:
                        type: integer
                        example: 20
                      total:
                        type: integer
                        example: 1
                  message:
                    type: string
                    example: 获取成功
      tags:
        - 'VIP管理 (VIP Plans)'
  /api/coupons/validate:
    post:
      summary: 验证优惠码
      operationId: ''
      description: 验证优惠码是否可用，并返回折扣信息
      parameters: []
      responses:
        200:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  success: true
                  code: 200
                  data:
                    valid: true
                    message: 优惠码可用
                    coupon:
                      code: NEWUSER2026
                      name: 新用户优惠
                      type: fixed
                      discount_value: '10.00'
                    discount_amount: '10.00'
                    final_amount: '118.00'
                  message: 验证成功
                properties:
                  success:
                    type: boolean
                    example: true
                  code:
                    type: integer
                    example: 200
                  data:
                    type: object
                    properties:
                      valid:
                        type: boolean
                        example: true
                      message:
                        type: string
                        example: 优惠码可用
                      coupon:
                        type: object
                        properties:
                          code:
                            type: string
                            example: NEWUSER2026
                          name:
                            type: string
                            example: 新用户优惠
                          type:
                            type: string
                            example: fixed
                          discount_value:
                            type: string
                            example: '10.00'
                      discount_amount:
                        type: string
                        example: '10.00'
                      final_amount:
                        type: string
                        example: '118.00'
                  message:
                    type: string
                    example: 验证成功
        400:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  success: false
                  code: 400
                  data: null
                  message: 优惠码已过期
                properties:
                  success:
                    type: boolean
                    example: false
                  code:
                    type: integer
                    example: 400
                  data:
                    type: string
                    example: null
                  message:
                    type: string
                    example: 优惠码已过期
      tags:
        - '优惠码管理 (Coupons)'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                code:
                  type: string
                  description: 优惠码
                  example: NEWUSER2026
                amount:
                  type: number
                  description: 订单金额
                  example: 128.0
              required:
                - code
                - amount
  /api/image-search/1688/image:
    post:
      summary: '1688 以图搜图'
      operationId: '1688'
      description: '上传图片文件或提供 Base64 编码的图片数据，在 1688 平台搜索相似商品'
      parameters: []
      responses:
        200:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  success: true
                  code: 200
                  data:
                    -
                      title: 2024新款现货懒人神器
                      price: '29.90'
                      image: 'https://cbu01.alicdn.com/img/ibank/xxx.jpg'
                      url: 'https://detail.1688.com/offer/12345.html'
                  message: '搜图成功，找到 20 条结果'
                properties:
                  success:
                    type: boolean
                    example: true
                  code:
                    type: integer
                    example: 200
                  data:
                    type: array
                    example:
                      -
                        title: 2024新款现货懒人神器
                        price: '29.90'
                        image: 'https://cbu01.alicdn.com/img/ibank/xxx.jpg'
                        url: 'https://detail.1688.com/offer/12345.html'
                    items:
                      type: object
                      properties:
                        title:
                          type: string
                          example: 2024新款现货懒人神器
                        price:
                          type: string
                          example: '29.90'
                        image:
                          type: string
                          example: 'https://cbu01.alicdn.com/img/ibank/xxx.jpg'
                        url:
                          type: string
                          example: 'https://detail.1688.com/offer/12345.html'
                  message:
                    type: string
                    example: '搜图成功，找到 20 条结果'
        400:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  success: false
                  code: 400
                  data: null
                  message: '请提供图片文件或 Base64 数据'
                properties:
                  success:
                    type: boolean
                    example: false
                  code:
                    type: integer
                    example: 400
                  data:
                    type: string
                    example: null
                  message:
                    type: string
                    example: '请提供图片文件或 Base64 数据'
        401:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  message: Unauthenticated.
                properties:
                  message:
                    type: string
                    example: Unauthenticated.
      tags:
        - 图片搜索：1688
      requestBody:
        required: false
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                image:
                  type: string
                  format: binary
                  description: '图片文件（与 image_base64 二选一）'
                image_base64:
                  type: string
                  description: '图片的 Base64 编码（与 image 二选一）'
                  example: /9j/4AAQSkZJRg...
                page:
                  type: integer
                  description: '页码，默认 1'
                  example: 1
                size:
                  type: integer
                  description: '每页数量，默认 20'
                  example: 20
  /api/image-search/1688/url:
    post:
      summary: '1688 URL 搜图'
      operationId: 1688URL
      description: '提供图片 URL 地址，在 1688 平台搜索相似商品'
      parameters: []
      responses:
        200:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  success: true
                  code: 200
                  data:
                    -
                      title: 2024新款现货懒人神器
                      price: '29.90'
                      image: 'https://cbu01.alicdn.com/img/ibank/xxx.jpg'
                      url: 'https://detail.1688.com/offer/12345.html'
                  message: '搜图成功，找到 20 条结果'
                properties:
                  success:
                    type: boolean
                    example: true
                  code:
                    type: integer
                    example: 200
                  data:
                    type: array
                    example:
                      -
                        title: 2024新款现货懒人神器
                        price: '29.90'
                        image: 'https://cbu01.alicdn.com/img/ibank/xxx.jpg'
                        url: 'https://detail.1688.com/offer/12345.html'
                    items:
                      type: object
                      properties:
                        title:
                          type: string
                          example: 2024新款现货懒人神器
                        price:
                          type: string
                          example: '29.90'
                        image:
                          type: string
                          example: 'https://cbu01.alicdn.com/img/ibank/xxx.jpg'
                        url:
                          type: string
                          example: 'https://detail.1688.com/offer/12345.html'
                  message:
                    type: string
                    example: '搜图成功，找到 20 条结果'
        400:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  success: false
                  code: 400
                  data: null
                  message: '请提供图片 URL'
                properties:
                  success:
                    type: boolean
                    example: false
                  code:
                    type: integer
                    example: 400
                  data:
                    type: string
                    example: null
                  message:
                    type: string
                    example: '请提供图片 URL'
        401:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  message: Unauthenticated.
                properties:
                  message:
                    type: string
                    example: Unauthenticated.
      tags:
        - 图片搜索：1688
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                url:
                  type: string
                  description: '图片 URL 地址'
                  example: 'https://cbu01.alicdn.com/img/ibank/O1CN01cM2vWn1U3e9n2HF80_!!2219132612462-0-cib.jpg'
                page:
                  type: integer
                  description: '页码，默认 1'
                  example: 1
                size:
                  type: integer
                  description: '每页数量，默认 20'
                  example: 20
              required:
                - url
  /api/payment/alipay/create:
    post:
      summary: 开通VIP会员（创建支付宝支付）
      operationId: VIP
      description: 为已创建的订单生成支付宝支付二维码，用户扫码后完成支付即可开通VIP
      parameters: []
      responses:
        200:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  success: true
                  code: 200
                  data:
                    qr_code: 'https://qr.alipay.com/...'
                  message: 支付创建成功，请扫描二维码完成支付
                properties:
                  success:
                    type: boolean
                    example: true
                  code:
                    type: integer
                    example: 200
                  data:
                    type: object
                    properties:
                      qr_code:
                        type: string
                        example: 'https://qr.alipay.com/...'
                  message:
                    type: string
                    example: 支付创建成功，请扫描二维码完成支付
      tags:
        - 支付接口
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                order_no:
                  type: string
                  description: 订单号
                  example: 202601261500001ABC
              required:
                - order_no
  /api/payment/alipay-notify:
    post:
      summary: 支付宝异步通知
      operationId: ''
      description: 接收支付宝的支付结果通知
      parameters: []
      responses: {  }
      tags:
        - 支付接口
      security: []
  /api/auth/send-code:
    post:
      summary: 发送短信验证码
      operationId: ''
      description: 向指定手机号发送验证码，验证码有效期5分钟，60秒内不可重复发送
      parameters: []
      responses:
        200:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  success: true
                  code: 200
                  data: null
                  message: 验证码已发送，请注意查收
                properties:
                  success:
                    type: boolean
                    example: true
                  code:
                    type: integer
                    example: 200
                  data:
                    type: string
                    example: null
                  message:
                    type: string
                    example: 验证码已发送，请注意查收
        400:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  success: false
                  code: 400
                  data: null
                  message: 请等待60秒后再试
                properties:
                  success:
                    type: boolean
                    example: false
                  code:
                    type: integer
                    example: 400
                  data:
                    type: string
                    example: null
                  message:
                    type: string
                    example: 请等待60秒后再试
      tags:
        - 用户认证
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                phone_area_code:
                  type: string
                  description: 国际区号，默认86
                  example: '86'
                phone:
                  type: string
                  description: 手机号
                  example: '13800138000'
              required:
                - phone
      security: []
  /api/auth/register:
    post:
      summary: 用户注册
      operationId: ''
      description: 通过手机号和短信验证码注册新用户，注册成功后自动登录
      parameters: []
      responses:
        200:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  success: true
                  code: 200
                  data:
                    user:
                      id: 1
                      phone: '13800138000'
                      phone_area_code: '86'
                      name: null
                      vip_level_id: 0
                    token: 1|abc...xyz
                  message: 注册成功
                properties:
                  success:
                    type: boolean
                    example: true
                  code:
                    type: integer
                    example: 200
                  data:
                    type: object
                    properties:
                      user:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 1
                          phone:
                            type: string
                            example: '13800138000'
                          phone_area_code:
                            type: string
                            example: '86'
                          name:
                            type: string
                            example: null
                          vip_level_id:
                            type: integer
                            example: 0
                      token:
                        type: string
                        example: 1|abc...xyz
                  message:
                    type: string
                    example: 注册成功
        400:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  success: false
                  code: 400
                  data: null
                  message: 该手机号已注册
                properties:
                  success:
                    type: boolean
                    example: false
                  code:
                    type: integer
                    example: 400
                  data:
                    type: string
                    example: null
                  message:
                    type: string
                    example: 该手机号已注册
      tags:
        - 用户认证
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                phone_area_code:
                  type: string
                  description: 国际区号，默认86
                  example: '86'
                phone:
                  type: string
                  description: 手机号
                  example: '13800138000'
                sms_code:
                  type: string
                  description: 短信验证码
                  example: '123456'
                password:
                  type: string
                  description: 密码，至少6位
                  example: password123
              required:
                - phone
                - sms_code
                - password
      security: []
  /api/auth/login:
    post:
      summary: 用户登录
      operationId: ''
      description: 通过手机号和密码登录，返回访问令牌
      parameters: []
      responses:
        200:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  success: true
                  code: 200
                  data:
                    user:
                      id: 1
                      phone: '13800138000'
                      phone_area_code: '86'
                      name: null
                      vip_level_id: 0
                    token: 2|xyz...abc
                  message: 登录成功
                properties:
                  success:
                    type: boolean
                    example: true
                  code:
                    type: integer
                    example: 200
                  data:
                    type: object
                    properties:
                      user:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 1
                          phone:
                            type: string
                            example: '13800138000'
                          phone_area_code:
                            type: string
                            example: '86'
                          name:
                            type: string
                            example: null
                          vip_level_id:
                            type: integer
                            example: 0
                      token:
                        type: string
                        example: 2|xyz...abc
                  message:
                    type: string
                    example: 登录成功
        401:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  success: false
                  code: 401
                  data: null
                  message: 手机号或密码错误
                properties:
                  success:
                    type: boolean
                    example: false
                  code:
                    type: integer
                    example: 401
                  data:
                    type: string
                    example: null
                  message:
                    type: string
                    example: 手机号或密码错误
      tags:
        - 用户认证
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                phone_area_code:
                  type: string
                  description: 国际区号，默认86
                  example: '86'
                phone:
                  type: string
                  description: 手机号
                  example: '13800138000'
                password:
                  type: string
                  description: 密码
                  example: password123
              required:
                - phone
                - password
      security: []
  /api/auth/reset-password:
    post:
      summary: 重置密码
      operationId: ''
      description: 通过短信验证码重置密码
      parameters: []
      responses:
        200:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  success: true
                  code: 200
                  data: null
                  message: 密码重置成功，请重新登录
                properties:
                  success:
                    type: boolean
                    example: true
                  code:
                    type: integer
                    example: 200
                  data:
                    type: string
                    example: null
                  message:
                    type: string
                    example: 密码重置成功，请重新登录
        404:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  success: false
                  code: 404
                  data: null
                  message: 该手机号未注册
                properties:
                  success:
                    type: boolean
                    example: false
                  code:
                    type: integer
                    example: 404
                  data:
                    type: string
                    example: null
                  message:
                    type: string
                    example: 该手机号未注册
      tags:
        - 用户认证
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                phone_area_code:
                  type: string
                  description: 国际区号，默认86
                  example: '86'
                phone:
                  type: string
                  description: 手机号
                  example: '13800138000'
                sms_code:
                  type: string
                  description: 短信验证码
                  example: '123456'
                password:
                  type: string
                  description: 新密码，至少6位
                  example: newpassword123
              required:
                - phone
                - sms_code
                - password
      security: []
  /api/auth/me:
    get:
      summary: 获取当前用户信息
      operationId: ''
      description: 获取已登录用户的详细信息
      parameters: []
      responses:
        200:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  success: true
                  code: 200
                  data:
                    id: 1
                    phone: '13800138000'
                    phone_area_code: '86'
                    name: null
                    email: null
                    vip_level_id: 0
                    vip_expired_at: null
                    last_login_at: '2026-01-23 15:30:00'
                    last_login_location: '中国 广东省 深圳市'
                  message: 获取成功
                properties:
                  success:
                    type: boolean
                    example: true
                  code:
                    type: integer
                    example: 200
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      phone:
                        type: string
                        example: '13800138000'
                      phone_area_code:
                        type: string
                        example: '86'
                      name:
                        type: string
                        example: null
                      email:
                        type: string
                        example: null
                      vip_level_id:
                        type: integer
                        example: 0
                      vip_expired_at:
                        type: string
                        example: null
                      last_login_at:
                        type: string
                        example: '2026-01-23 15:30:00'
                      last_login_location:
                        type: string
                        example: '中国 广东省 深圳市'
                  message:
                    type: string
                    example: 获取成功
        401:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  message: Unauthenticated.
                properties:
                  message:
                    type: string
                    example: Unauthenticated.
      tags:
        - 用户认证
  /api/auth/logout:
    post:
      summary: 退出登录
      operationId: ''
      description: 删除当前访问令牌
      parameters: []
      responses:
        200:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  success: true
                  code: 200
                  data: null
                  message: 退出成功
                properties:
                  success:
                    type: boolean
                    example: true
                  code:
                    type: integer
                    example: 200
                  data:
                    type: string
                    example: null
                  message:
                    type: string
                    example: 退出成功
      tags:
        - 用户认证
  /api/orders:
    post:
      summary: 创建订单
      operationId: ''
      description: 选择VIP套餐创建订单，可选使用优惠码
      parameters: []
      responses:
        200:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  success: true
                  code: 200
                  data:
                    id: 1
                    order_no: 202601261500001ABC
                    plan_name: '月度会员 128元'
                    original_price: '128.00'
                    discount_amount: '10.00'
                    final_price: '118.00'
                    status: pending
                    expired_at: '2026-01-26 15:30:00'
                  message: 订单创建成功
                properties:
                  success:
                    type: boolean
                    example: true
                  code:
                    type: integer
                    example: 200
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      order_no:
                        type: string
                        example: 202601261500001ABC
                      plan_name:
                        type: string
                        example: '月度会员 128元'
                      original_price:
                        type: string
                        example: '128.00'
                      discount_amount:
                        type: string
                        example: '10.00'
                      final_price:
                        type: string
                        example: '118.00'
                      status:
                        type: string
                        example: pending
                      expired_at:
                        type: string
                        example: '2026-01-26 15:30:00'
                  message:
                    type: string
                    example: 订单创建成功
      tags:
        - '订单管理 (Orders)'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                vip_plan_id:
                  type: integer
                  description: VIP套餐ID
                  example: 2
                coupon_code:
                  type: string
                  description: 优惠码
                  example: NEWUSER2026
                  nullable: true
              required:
                - vip_plan_id
  '/api/orders/{orderNo}':
    get:
      summary: 查询订单详情
      operationId: ''
      description: 根据订单号查询订单详细信息
      parameters: []
      responses:
        200:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  success: true
                  code: 200
                  data:
                    id: 1
                    order_no: 202601261500001ABC
                    plan_name: '月度会员 128元'
                    original_price: '128.00'
                    discount_amount: '10.00'
                    final_price: '118.00'
                    payment_method: alipay
                    status: pending
                    paid_at: null
                    expired_at: '2026-01-26 15:30:00'
                    created_at: '2026-01-26 15:00:00'
                  message: 获取成功
                properties:
                  success:
                    type: boolean
                    example: true
                  code:
                    type: integer
                    example: 200
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      order_no:
                        type: string
                        example: 202601261500001ABC
                      plan_name:
                        type: string
                        example: '月度会员 128元'
                      original_price:
                        type: string
                        example: '128.00'
                      discount_amount:
                        type: string
                        example: '10.00'
                      final_price:
                        type: string
                        example: '118.00'
                      payment_method:
                        type: string
                        example: alipay
                      status:
                        type: string
                        example: pending
                      paid_at:
                        type: string
                        example: null
                      expired_at:
                        type: string
                        example: '2026-01-26 15:30:00'
                      created_at:
                        type: string
                        example: '2026-01-26 15:00:00'
                  message:
                    type: string
                    example: 获取成功
      tags:
        - '订单管理 (Orders)'
    parameters:
      -
        in: path
        name: orderNo
        description: 订单号
        example: 202601261500001ABC
        required: true
        schema:
          type: string
  '/api/orders/{orderNo}/cancel':
    post:
      summary: 取消订单
      operationId: ''
      description: 取消未支付的订单
      parameters: []
      responses:
        200:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  success: true
                  code: 200
                  data: null
                  message: 订单已取消
                properties:
                  success:
                    type: boolean
                    example: true
                  code:
                    type: integer
                    example: 200
                  data:
                    type: string
                    example: null
                  message:
                    type: string
                    example: 订单已取消
      tags:
        - '订单管理 (Orders)'
    parameters:
      -
        in: path
        name: orderNo
        description: 订单号
        example: 202601261500001ABC
        required: true
        schema:
          type: string
  '/api/orders/{orderNo}/payment-status':
    get:
      summary: 查询订单支付状态
      operationId: ''
      description: 查询订单当前的支付状态
      parameters: []
      responses:
        200:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  success: true
                  code: 200
                  data:
                    order_no: 202601261500001ABC
                    status: paid
                    paid_at: '2026-01-26 15:05:00'
                  message: 查询成功
                properties:
                  success:
                    type: boolean
                    example: true
                  code:
                    type: integer
                    example: 200
                  data:
                    type: object
                    properties:
                      order_no:
                        type: string
                        example: 202601261500001ABC
                      status:
                        type: string
                        example: paid
                      paid_at:
                        type: string
                        example: '2026-01-26 15:05:00'
                  message:
                    type: string
                    example: 查询成功
      tags:
        - '订单管理 (Orders)'
    parameters:
      -
        in: path
        name: orderNo
        description: 订单号
        example: 202601261500001ABC
        required: true
        schema:
          type: string
